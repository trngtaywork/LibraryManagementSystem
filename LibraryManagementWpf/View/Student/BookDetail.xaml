<UserControl x:Class="LibraryManagementWpf.View.Student.BookDetail"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:Icon="http://metro.mahapps.com/winfx/xaml/iconpacks"
             mc:Ignorable="d"
             d:DesignHeight="720" d:DesignWidth="1080">
    
    <DockPanel Margin="20" Background="#eff2f7">
        <Border CornerRadius="15" Padding="20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="250"/>
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="500"/>
                </Grid.RowDefinitions>
                <StackPanel Grid.Column="0" Grid.Row="1" VerticalAlignment="Center"  HorizontalAlignment="Center">
                    <Border BorderBrush="#2196F3" BorderThickness="4" CornerRadius="10" Width="200" Height="300" Margin="0,0,0,20">
                        <Image Source="{Binding SelectedBook.Image}" Stretch="Uniform" ClipToBounds="True"/>
                    </Border>
                </StackPanel>

                <StackPanel Grid.Column="1"  Grid.Row="1" Margin="20,0,0,0">
                    <TextBlock Text="{Binding SelectedBook.Title}" FontSize="25" FontWeight="Bold" Margin="0,0,0,10"/>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,5">
                        <Icon:PackIconMaterial Kind="PencilBoxOutline" Style="{StaticResource menuButtonIcon}" Height="35"/>
                        <TextBlock VerticalAlignment="Center" FontSize="18" >
                            <Run Text="Tác giả: "/>
                        </TextBlock>
                        <ListBox ItemsSource="{Binding SelectedBook.Authors}" Margin="0,0,0,5" 
                            ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                            BorderThickness="0" Background="Transparent">
                            <ListBox.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ListBox.ItemsPanel>
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding AuthorName}" FontSize="14" Foreground="#666666"/>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                            <ListBox.ItemContainerStyle>
                                <Style TargetType="ListBoxItem">
                                    <Setter Property="Padding" Value="0,0,5,0"/>
                                    <Setter Property="Margin" Value="0"/>
                                </Style>
                            </ListBox.ItemContainerStyle>
                        </ListBox>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,5">
                        <Icon:PackIconMaterial Kind="WidgetsOutline" Style="{StaticResource menuButtonIcon}" Height="35"/>
                        <TextBlock VerticalAlignment="Center" FontSize="18" >
                            <Run Text="Thể loại: "/>
                            <Run Text="{Binding SelectedBook.Category.CategoryName}"/>
                        </TextBlock>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,5">
                        <Icon:PackIconMaterial Kind="CalendarCheckOutline" Style="{StaticResource menuButtonIcon}" Height="35"/>
                        <TextBlock VerticalAlignment="Center"  FontSize="18" >
                            <Run Text="Ngày phát hành: "/>
                            <Run Text="{Binding SelectedBook.PublicationDate}"/>
                        </TextBlock>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,5">
                        <Icon:PackIconMaterial Kind="ListStatus" Style="{StaticResource menuButtonIcon}" Height="35"/>
                        <TextBlock VerticalAlignment="Center"  FontSize="18" >
                            <Run Text="Trạng thái: "/>
                             <Run x:Name="statusRun" Text="Khả dụng"/>
                            <Run>
                                <Run.Style>
                                    <Style TargetType="Run">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding SelectedBook.Quantity}" Value="0">
                                                <Setter Property="Text" Value="Out of Stock"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Run.Style>
                            </Run>
                        </TextBlock>
                    </StackPanel>
                    <TextBlock Text="Mô tả:" FontSize="20" FontWeight="Bold" Margin="0,20,0,5"/>
                    <TextBlock Text="This book takes readers on a thrilling adventure full of twists and turns..." FontSize="18" TextWrapping="Wrap" />

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,20,0,0">
                        <Button Command="{Binding DataContext.ReserveBookCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                Content="Reservation book" Width="120" Height="40" Margin="0,0,10,0" Background="#4CAF50" Foreground="White" FontWeight="Bold" BorderThickness="0" Cursor="Hand"
                                CommandParameter="{Binding SelectedBook.BookId}"/>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Border>
    </DockPanel>

</UserControl>
