<UserControl x:Class="LibraryManagementWpf.View.Student.BookList"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:Icon="http://metro.mahapps.com/winfx/xaml/iconpacks"
             xmlns:local="clr-namespace:LibraryManagementWpf.ViewModel.Student"
             mc:Ignorable="d" 
              d:DesignHeight="450" d:DesignWidth="800">
    <UserControl.Resources>
        <Style x:Key="Button20Style" TargetType="Button">
            <Setter Property="Background" Value="#4D4AE8"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontFamily" Value="Inter"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#4D4AE8"/>
            <Setter Property="Width" Value="150"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect ShadowDepth="1" Color="#2E3650" Opacity="0.075" BlurRadius="1"/>
                </Setter.Value>
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}" 
                                CornerRadius="10">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#3733E5"/>
                    <Setter Property="BorderBrush" Value="#3733E5"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#3E3BBA"/>
                    <Setter Property="BorderBrush" Value="#3A38AE"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Opacity" Value="0.65"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>
    <DockPanel Background="#eff2f7">
        <DockPanel DockPanel.Dock="Top" Margin="10">
            <TextBlock Margin="0,0,10,0" VerticalAlignment="Center" FontSize="18" FontWeight="SemiBold" Text="Tìm kiếm theo" Foreground="#121578"/>
            <TextBlock Width="Auto" Margin="5" VerticalAlignment="Center" Text="Tiêu đề sách:" Foreground="#333"/>
            <TextBox Width="150" Height="25" Margin="5" VerticalAlignment="Center"
                     Style="{Binding textboxSearch}" DockPanel.Dock="Left"  
                     Text="{Binding SearchTextTitle, UpdateSourceTrigger=PropertyChanged}"/>

            <TextBlock Width="Auto" Margin="5" VerticalAlignment="Center" Text="Tác giả:" Foreground="#333"/>
            <TextBox Width="150" Margin="5" Height="25" VerticalAlignment="Center" 
                     Style="{Binding textboxSearch}" DockPanel.Dock="Left"
                     Text="{Binding SearchTextAuthor, UpdateSourceTrigger=PropertyChanged}"/>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" DockPanel.Dock="Right">
                <TextBlock Width="Auto" Margin="5" VerticalAlignment="Center" Text="Thể loại:" Foreground="#333"/>
                <ComboBox Width="Auto" Margin="5" VerticalAlignment="Center" SelectedIndex="0" BorderBrush="#dee4ec" BorderThickness="1"
                          ItemsSource="{Binding CategoriesList}"
                          SelectedValue="{Binding SelectedSortCategory, Mode=TwoWay}">
                </ComboBox>

                <TextBlock Width="Auto" Margin="5" VerticalAlignment="Center" Text="Sắp xếp:" Foreground="#333"/>
                <ComboBox Width="Auto" Margin="5" VerticalAlignment="Center"  BorderBrush="#dee4ec" BorderThickness="1"
                          SelectedValue="{Binding SelectedSortOrder, Mode=TwoWay}"
                            SelectedValuePath="Content">
                    <ComboBoxItem Content="Default"/>
                    <ComboBoxItem Content="A-Z"/>
                    <ComboBoxItem Content="Z-A"/>
                    <ComboBoxItem Content="New Release"/>
                    <ComboBoxItem Content="Most Borrowed"/>
                </ComboBox>
            </StackPanel>
        </DockPanel>
        <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal" HorizontalAlignment="Center" Margin="10">
            <Border CornerRadius="5" Padding="5" Background="White" Margin="0 10 10 10" Grid.Row="6" HorizontalAlignment="Right" BorderBrush="#dee4ec" BorderThickness="1">
                <StackPanel Orientation="Horizontal">
                    <Button Command="{Binding PreviousPageCommand}" Style="{StaticResource paginButton}">
                        <Icon:PackIconMaterial Kind="ChevronLeft" Style="{StaticResource paginButtonIcon}"/>
                    </Button>

                    <Rectangle Width="1" Fill="#dee4ec" Margin="3 7"/>

                    <Button Style="{StaticResource paginButton}"  Background="#7950f2" Foreground="#ffffff">
                        <TextBlock>
                        <Run Text="{Binding CurrentPage}" />
                        <Run Text="/" />
                        <Run Text="{Binding TotalPages}" />
                        </TextBlock>
                    </Button>
                    <Rectangle Width="1" Fill="#dee4ec" Margin="3 7"/>

                    <Button Command="{Binding NextPageCommand}" Style="{StaticResource paginButton}">
                        <Icon:PackIconMaterial Kind="ChevronRight" Style="{StaticResource paginButtonIcon}"/>
                    </Button>
                </StackPanel>
            </Border>
        </StackPanel>

        <Rectangle DockPanel.Dock="Bottom" Height="2" Fill="#dee4ec" Margin="10,0"/>
        <Rectangle DockPanel.Dock="Top" Height="2" Fill="#dee4ec" Margin="10,0"/>
        
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <ItemsControl ItemsSource="{Binding BooksList}"  >
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Height="300" BorderBrush="#D3D3D3" BorderThickness="1" Margin="10" Padding="15" CornerRadius="10" Background="White" >
                            <StackPanel>
                                <Image Source="{Binding Image}" Height="120" Margin="0,0,0,15"/>
                                <TextBlock Text="{Binding Title}" FontWeight="Bold" FontSize="16" Foreground="#333333" Margin="0,0,0,8"/>
                                <ListBox ItemsSource="{Binding Authors}" Margin="0,0,0,5" 
                                         ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                     BorderThickness="0" Background="Transparent">
                                    <ListBox.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Orientation="Horizontal"/>
                                        </ItemsPanelTemplate>
                                    </ListBox.ItemsPanel>
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding AuthorName}" FontSize="14" Foreground="#666666"/>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                    <ListBox.ItemContainerStyle>
                                        <Style TargetType="ListBoxItem">
                                            <Setter Property="Padding" Value="0,0,5,0"/>
                                            <Setter Property="Margin" Value="0"/>
                                        </Style>
                                    </ListBox.ItemContainerStyle>
                                </ListBox>
                                <TextBlock Text="{Binding Category.CategoryName}" FontSize="13" Foreground="#888888" Margin="0,0,0,10"/>
                                <WrapPanel>
                                    <Button Margin="5" Width="85" Height="45" Style="{StaticResource Button20Style}" Cursor="Hand"
                                            Command="{Binding DataContext.ViewDetailCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            CommandParameter="{Binding BookId}">
                                        View Detail
                                    </Button>
                                    <Button Margin="5" Width="85" Height="45" Style="{StaticResource Button20Style}" Cursor="Hand"
                                            Command="{Binding DataContext.ReserveBookCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            CommandParameter="{Binding BookId}">
                                        Reservation
                                    </Button>
                                </WrapPanel>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <UniformGrid Columns="4" Margin="15"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl>
        </ScrollViewer>

    </DockPanel>
</UserControl>
